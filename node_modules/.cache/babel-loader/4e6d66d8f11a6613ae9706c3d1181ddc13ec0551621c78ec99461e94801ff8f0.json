{"ast":null,"code":"export default class AuthApi {\n  constructor(_ref) {\n    let {\n      baseUrl,\n      headers\n    } = _ref;\n    this._baseUrl = baseUrl;\n    this._headers = headers;\n  }\n  postUser(email, password) {\n    return fetch(`${this._baseUrl}/signup`, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({\n        \"password\": `${password}`,\n        \"email\": `${email}`\n      })\n    }).then(this._checkResponse);\n  }\n  autorizeUser(email, password) {\n    return fetch(`${this._baseUrl}/signin`, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({\n        \"password\": `${password}`,\n        \"email\": `${email}`\n      })\n    }).then(this._checkResponse).then(res => {\n      localStorage.setItem('token', res.token);\n      console.log();\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n  checkTokenUser(token) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: 'get',\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${localStorage.getItem('token')}`\n      }\n    }).then(this._checkResponse);\n  }\n  _checkResponse(res) {\n    if (res.ok) {\n      return res.json();\n    } else {\n      return Promise.reject(`Ошибка:${res.status} ${res.statusText}`);\n    }\n  }\n}\nconst authApi = new AuthApi({\n  baseUrl: 'https://auth.nomoreparties.co',\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\nexport { authApi };","map":{"version":3,"names":["AuthApi","constructor","baseUrl","headers","_baseUrl","_headers","postUser","email","password","fetch","method","body","JSON","stringify","then","_checkResponse","autorizeUser","res","localStorage","setItem","token","console","log","catch","err","checkTokenUser","getItem","ok","json","Promise","reject","status","statusText","authApi"],"sources":["/Users/li4nost/dev/mesto-react/src/utils/AuthApi.js"],"sourcesContent":["export default class AuthApi {\n    constructor({baseUrl, headers}) {\n      this._baseUrl = baseUrl\n      this._headers = headers\n    }\n    postUser(email, password) {\n        return fetch(`${this._baseUrl}/signup`, {\n          method: 'POST',\n          headers: this._headers,\n          body: JSON.stringify({\n            \"password\": `${password}`,\n            \"email\": `${email}` \n          })\n        }\n        )\n        .then(this._checkResponse);\n      }\n\n      autorizeUser(email, password) {\n        return fetch(`${this._baseUrl}/signin`, {\n          method: 'POST',\n          headers: this._headers,\n          body: JSON.stringify({\n            \"password\": `${password}`,\n            \"email\": `${email}` \n          })\n        }\n        )\n        .then(this._checkResponse)\n          .then((res)=>{\n            localStorage.setItem('token', res.token);\n            console.log();\n          })\n          .catch((err)=>{\n            console.log(err);\n          })\n      }\n\n      checkTokenUser(token) {\n        return fetch(`${this._baseUrl}/users/me`, {\n          method: 'get',\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"Authorization\" : `Bearer ${localStorage.getItem('token')}`\n          },\n        }\n        )\n          .then(this._checkResponse);\n      }\n\n      _checkResponse(res) {\n        if (res.ok) {\n          return res.json();\n        } else {\n          return Promise.reject(`Ошибка:${res.status} ${res.statusText}`);\n        }\n      }\n\n      \n}\n\n\n\nconst authApi = new AuthApi({\n    baseUrl: 'https://auth.nomoreparties.co',\n    headers: {\n        'Content-Type': 'application/json'\n    }\n  })\n  export {authApi}"],"mappings":"AAAA,eAAe,MAAMA,OAAO,CAAC;EACzBC,WAAW,OAAqB;IAAA,IAApB;MAACC,OAAO;MAAEC;IAAO,CAAC;IAC5B,IAAI,CAACC,QAAQ,GAAGF,OAAO;IACvB,IAAI,CAACG,QAAQ,GAAGF,OAAO;EACzB;EACAG,QAAQ,CAACC,KAAK,EAAEC,QAAQ,EAAE;IACtB,OAAOC,KAAK,CAAE,GAAE,IAAI,CAACL,QAAS,SAAQ,EAAE;MACtCM,MAAM,EAAE,MAAM;MACdP,OAAO,EAAE,IAAI,CAACE,QAAQ;MACtBM,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QACnB,UAAU,EAAG,GAAEL,QAAS,EAAC;QACzB,OAAO,EAAG,GAAED,KAAM;MACpB,CAAC;IACH,CAAC,CACA,CACAO,IAAI,CAAC,IAAI,CAACC,cAAc,CAAC;EAC5B;EAEAC,YAAY,CAACT,KAAK,EAAEC,QAAQ,EAAE;IAC5B,OAAOC,KAAK,CAAE,GAAE,IAAI,CAACL,QAAS,SAAQ,EAAE;MACtCM,MAAM,EAAE,MAAM;MACdP,OAAO,EAAE,IAAI,CAACE,QAAQ;MACtBM,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QACnB,UAAU,EAAG,GAAEL,QAAS,EAAC;QACzB,OAAO,EAAG,GAAED,KAAM;MACpB,CAAC;IACH,CAAC,CACA,CACAO,IAAI,CAAC,IAAI,CAACC,cAAc,CAAC,CACvBD,IAAI,CAAEG,GAAG,IAAG;MACXC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEF,GAAG,CAACG,KAAK,CAAC;MACxCC,OAAO,CAACC,GAAG,EAAE;IACf,CAAC,CAAC,CACDC,KAAK,CAAEC,GAAG,IAAG;MACZH,OAAO,CAACC,GAAG,CAACE,GAAG,CAAC;IAClB,CAAC,CAAC;EACN;EAEAC,cAAc,CAACL,KAAK,EAAE;IACpB,OAAOX,KAAK,CAAE,GAAE,IAAI,CAACL,QAAS,WAAU,EAAE;MACxCM,MAAM,EAAE,KAAK;MACbP,OAAO,EAAE;QACP,cAAc,EAAE,kBAAkB;QAClC,eAAe,EAAI,UAASe,YAAY,CAACQ,OAAO,CAAC,OAAO,CAAE;MAC5D;IACF,CAAC,CACA,CACEZ,IAAI,CAAC,IAAI,CAACC,cAAc,CAAC;EAC9B;EAEAA,cAAc,CAACE,GAAG,EAAE;IAClB,IAAIA,GAAG,CAACU,EAAE,EAAE;MACV,OAAOV,GAAG,CAACW,IAAI,EAAE;IACnB,CAAC,MAAM;MACL,OAAOC,OAAO,CAACC,MAAM,CAAE,UAASb,GAAG,CAACc,MAAO,IAAGd,GAAG,CAACe,UAAW,EAAC,CAAC;IACjE;EACF;AAGN;AAIA,MAAMC,OAAO,GAAG,IAAIjC,OAAO,CAAC;EACxBE,OAAO,EAAE,+BAA+B;EACxCC,OAAO,EAAE;IACL,cAAc,EAAE;EACpB;AACF,CAAC,CAAC;AACF,SAAQ8B,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}